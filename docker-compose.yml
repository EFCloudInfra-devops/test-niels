version: '3.8'
services:
  backend:
    build: ./backend
    image: manager-backend      # âœ… dit toevoegen
    container_name: manager-backend
    expose:
      - "8000"
    volumes:
      - ./backend/data:/app/backend/data
      - ./backend/app:/app/app
    environment:
      - NETCONF_DEVICES_JSON=/app/backend/data/devices.json
    restart: unless-stopped

  frontend:
    build: ./frontend
    container_name: manager-frontend
    ports:
      - "8081:80"
    depends_on:
      - backend
    restart: unless-stopped
      
  # nightly-refresh:
  #   container_name: nightly-refresh
  #   image: manager-backend
  #   command: python -m app.jobs.nightly_refresh
  #   volumes:
  #     - ./backend/data:/app/backend/data
  #   restart: "no"

